import sys
import os

sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))

from sqlalchemy.orm import Session
from database import engine, SessionLocal
import models


models.Base.metadata.create_all(bind=engine)

RECIPES_DATA = [
    {
        "title": "Курица с картошкой в духовке",
        "ingredients": ["курица", "картофель", "лук", "морковь", "чеснок", "соль", "перец", "масло растительное"],
        "instructions": "1. Картофель и морковь почистить, нарезать крупно\n2. Лук нарезать полукольцами\n3. Курицу нарезать порционными кусками\n4. Смешать все ингредиенты, посолить, поперчить\n5. Выложить в форму, полить маслом\n6. Запекать 45 минут при 200°C",
        "cooking_time": 60,
        "difficulty": "easy"
    },
    {
        "title": "Куриные котлеты",
        "ingredients": ["куриный фарш", "лук", "яйцо", "соль", "перец", "панировочные сухари", "масло растительное"],
        "instructions": "1. Лук натереть на терке\n2. Смешать фарш, лук, яйцо, соль, перец\n3. Сформировать котлеты\n4. Обвалять в сухарях\n5. Жарить на среднем огне 7-8 минут с каждой стороны",
        "cooking_time": 30,
        "difficulty": "easy"
    },
    {
        "title": "Суп куриный с вермишелью",
        "ingredients": ["курица", "картофель", "морковь", "лук", "вермишель", "соль", "перец", "лавровый лист"],
        "instructions": "1. Курицу залить водой, довести до кипения\n2. Добавить нарезанный картофель\n3. Лук и морковь обжарить, добавить в суп\n4. За 10 минут до готовности добавить вермишель\n5. Посолить, поперчить, добавить лавровый лист",
        "cooking_time": 60,
        "difficulty": "easy"
    },
    {
        "title": "Куриные крылышки в медовом соусе",
        "ingredients": ["куриные крылышки", "мед", "соевый соус", "чеснок", "имбирь", "перец"],
        "instructions": "1. Крылышки промыть, обсушить\n2. Смешать мед, соевый соус, измельченный чеснок и имбирь\n3. Замариновать крылышки на 30 минут\n4. Запекать 35 минут при 200°C, периодически переворачивая",
        "cooking_time": 50,
        "difficulty": "medium"
    },
    {
        "title": "Курица в сливочном соусе",
        "ingredients": ["куриное филе", "сливки", "лук", "грибы", "соль", "перец", "масло сливочное"],
        "instructions": "1. Курицу нарезать кубиками, обжарить\n2. Лук и грибы нарезать, обжарить отдельно\n3. Соединить курицу с овощами\n4. Залить сливками, тушить 15 минут\n5. Посолить, поперчить",
        "cooking_time": 40,
        "difficulty": "medium"
    },
    {
        "title": "Куриный шашлык в духовке",
        "ingredients": ["курица", "лук", "лимон", "соль", "перец", "приправа для шашлыка", "масло оливковое"],
        "instructions": "1. Курицу нарезать кусками\n2. Лук нарезать кольцами\n3. Смешать все с лимонным соком и специями\n4. Мариновать 2 часа\n5. Нанизать на шпажки, запекать 25 минут при 220°C",
        "cooking_time": 45,
        "difficulty": "medium"
    },
    {
        "title": "Курица с рисом по-домашнему",
        "ingredients": ["курица", "рис", "морковь", "лук", "чеснок", "соль", "перец", "масло"],
        "instructions": "1. Курицу обжарить до румяной корочки\n2. Лук и морковь нарезать, обжарить\n3. Рис промыть\n4. Все сложить в кастрюлю, залить водой\n5. Тушить 30 минут на медленном огне",
        "cooking_time": 50,
        "difficulty": "easy"
    },
    {
        "title": "Куриные наггетсы",
        "ingredients": ["куриное филе", "яйцо", "мука", "сухари панировочные", "соль", "перец", "масло для жарки"],
        "instructions": "1. Курицу нарезать полосками\n2. Посолить, поперчить\n3. Обвалять в муке, затем в яйце, затем в сухарях\n4. Жарить в разогретом масле 5-7 минут до золотистого цвета",
        "cooking_time": 25,
        "difficulty": "easy"
    },
    {
        "title": "Куриная грудка с овощами на пару",
        "ingredients": ["куриная грудка", "брокколи", "морковь", "цветная капуста", "соль", "перец", "лимон"],
        "instructions": "1. Курицу нарезать кусочками\n2. Овощи разобрать на соцветия\n3. Все посолить, поперчить\n4. Готовить в пароварке 20 минут\n5. Подавать с долькой лимона",
        "cooking_time": 30,
        "difficulty": "easy"
    },
    {
        "title": "Куриный рулет с сыром",
        "ingredients": ["куриное филе", "сыр", "чеснок", "укроп", "соль", "перец", "яйцо"],
        "instructions": "1. Курицу отбить\n2. Сыр натереть, смешать с чесноком и укропом\n3. Выложить начинку на курицу, свернуть рулетом\n4. Обмазать яйцом, запекать 30 минут при 180°C",
        "cooking_time": 45,
        "difficulty": "medium"
    },

    # 11-20: Блюда из яиц
    {
        "title": "Яичница с помидорами",
        "ingredients": ["яйца", "помидоры", "лук", "соль", "перец", "масло подсолнечное"],
        "instructions": "1. Лук мелко нарезать, обжарить до золотистого цвета\n2. Помидоры нарезать кубиками, добавить к луку\n3. Вбить яйца, посолить, поперчить\n4. Жарить 5-7 минут на среднем огне",
        "cooking_time": 15,
        "difficulty": "easy"
    },
    {
        "title": "Омлет с сыром",
        "ingredients": ["яйца", "молоко", "сыр", "соль", "масло сливочное"],
        "instructions": "1. Яйца взбить с молоком и солью\n2. Сыр натереть на терке\n3. На разогретую сковороду вылить яичную смесь\n4. Посыпать сыром\n5. Накрыть крышкой, готовить 7-10 минут",
        "cooking_time": 15,
        "difficulty": "easy"
    },
    {
        "title": "Яйца пашот",
        "ingredients": ["яйца", "уксус", "соль", "хлеб", "масло сливочное"],
        "instructions": "1. Воду довести до кипения, добавить уксус\n2. Разбить яйцо в чашку\n3. Создать воронку в воде, аккуратно вылить яйцо\n4. Варить 3-4 минуты\n5. Подавать на тосте с маслом",
        "cooking_time": 10,
        "difficulty": "medium"
    },
    {
        "title": "Скрембл с зеленью",
        "ingredients": ["яйца", "молоко", "укроп", "петрушка", "соль", "масло сливочное"],
        "instructions": "1. Яйца взбить с молоком и солью\n2. Зелень мелко нарезать\n3. На сковороде растопить масло\n4. Вылить яичную смесь, постоянно помешивать\n5. Когда почти готово, добавить зелень",
        "cooking_time": 10,
        "difficulty": "easy"
    },
    {
        "title": "Фритатта с овощами",
        "ingredients": ["яйца", "помидоры", "перец болгарский", "лук", "сыр", "соль", "перец"],
        "instructions": "1. Овощи нарезать, обжарить\n2. Яйца взбить с солью и перцем\n3. Залить овощи яичной смесью\n4. Посыпать сыром\n5. Запекать 15 минут при 180°C",
        "cooking_time": 25,
        "difficulty": "medium"
    },
    {
        "title": "Яичница в хлебе",
        "ingredients": ["яйца", "хлеб", "соль", "перец", "масло сливочное"],
        "instructions": "1. Из хлеба вырезать середину\n2. Обжарить хлеб с одной стороны\n3. Перевернуть, разбить внутрь яйцо\n4. Накрыть крышкой, жарить 5 минут\n5. Посолить, поперчить",
        "cooking_time": 15,
        "difficulty": "easy"
    },
    {
        "title": "Яйца по-шотландски",
        "ingredients": ["яйца", "фарш мясной", "лук", "соль", "перец", "сухари панировочные"],
        "instructions": "1. Яйца отварить вкрутую, очистить\n2. Фарш смешать с луком, солью, перцем\n3. Обернуть яйца фаршем\n4. Обвалять в сухарях\n5. Жарить до готовности фарша",
        "cooking_time": 30,
        "difficulty": "medium"
    },
    {
        "title": "Яичный салат",
        "ingredients": ["яйца", "огурец", "лук зеленый", "сметана", "соль", "укроп"],
        "instructions": "1. Яйца отварить вкрутую, нарезать\n2. Огурец нарезать кубиками\n3. Лук и укроп мелко нарезать\n4. Все смешать, заправить сметаной\n5. Посолить по вкусу",
        "cooking_time": 20,
        "difficulty": "easy"
    },
    {
        "title": "Яйца Бенедикт",
        "ingredients": ["яйца", "хлеб тостовый", "бекон", "соус голландез", "соль", "уксус"],
        "instructions": "1. Хлеб поджарить\n2. Бекон обжарить\n3. Приготовить яйца пашот\n4. Собрать: хлеб + бекон + яйцо\n5. Полить соусом",
        "cooking_time": 25,
        "difficulty": "hard"
    },
    {
        "title": "Запеченные яйца в авокадо",
        "ingredients": ["яйца", "авокадо", "соль", "перец", "паприка"],
        "instructions": "1. Авокадо разрезать пополам, удалить косточку\n2. Немного вынуть мякоть\n3. В каждую половинку разбить по яйцу\n4. Посолить, поперчить, посыпать паприкой\n5. Запекать 15 минут при 180°C",
        "cooking_time": 20,
        "difficulty": "easy"
    },

    # 21-30: Супы
    {
        "title": "Борщ",
        "ingredients": ["говядина", "свекла", "картофель", "капуста", "морковь", "лук", "томатная паста", "соль",
                        "перец", "сметана"],
        "instructions": "1. Мясо отварить до готовности\n2. Овощи нарезать соломкой\n3. Свеклу и морковь потушить с томатной пастой\n4. Добавить картофель и капусту в бульон\n5. Через 15 минут добавить тушеные овощи\n6. Варить еще 10 минут, посолить, поперчить",
        "cooking_time": 120,
        "difficulty": "hard"
    },
    {
        "title": "Щи из свежей капусты",
        "ingredients": ["курица", "капуста", "картофель", "морковь", "лук", "помидоры", "соль", "перец",
                        "лавровый лист"],
        "instructions": "1. Курицу отварить, бульон процедить\n2. Картофель нарезать кубиками\n3. Лук и морковь обжарить\n4. Добавить все в бульон, варить 20 минут\n5. Добавить нарезанную капусту и помидоры\n6. Варить еще 15 минут",
        "cooking_time": 60,
        "difficulty": "medium"
    },
    {
        "title": "Грибной суп",
        "ingredients": ["грибы", "картофель", "лук", "морковь", "сливки", "соль", "перец", "укроп"],
        "instructions": "1. Грибы промыть, нарезать\n2. Обжарить лук и морковь\n3. Добавить грибы, обжарить 10 минут\n4. Залить водой, добавить картофель\n5. Варить 20 минут\n6. Добавить сливки, прокипятить 5 минут",
        "cooking_time": 40,
        "difficulty": "easy"
    },
    {
        "title": "Тыквенный суп-пюре",
        "ingredients": ["тыква", "картофель", "лук", "сливки", "соль", "перец", "имбирь"],
        "instructions": "1. Тыкву и картофель очистить, нарезать\n2. Лук обжарить\n3. Залить овощи водой, варить 25 минут\n4. Измельчить блендером до пюре\n5. Добавить сливки, специи\n6. Прогреть 5 минут",
        "cooking_time": 45,
        "difficulty": "medium"
    },
    {
        "title": "Солянка мясная",
        "ingredients": ["говядина", "колбаса", "сосиски", "огурцы соленые", "каперсы", "оливки", "томатная паста",
                        "лимон"],
        "instructions": "1. Мясо отварить до готовности\n2. Нарезать все мясные продукты\n3. Огурцы нарезать соломкой\n4. Обжарить лук с томатной пастой\n5. Все соединить в бульоне, варить 15 минут\n6. Добавить каперсы и оливки",
        "cooking_time": 90,
        "difficulty": "hard"
    },
    {
        "title": "Куриный бульон с лапшой",
        "ingredients": ["курица", "морковь", "лук", "лавровый лист", "перец горошком", "соль", "лапша", "укроп"],
        "instructions": "1. Курицу залить холодной водой\n2. Добавить целую морковь и луковицу\n3. Варить 1.5 часа на медленном огне\n4. Бульон процедить\n5. Добавить лапшу, варить 10 минут\n6. Посыпать укропом",
        "cooking_time": 100,
        "difficulty": "easy"
    },
    {
        "title": "Харчо",
        "ingredients": ["говядина", "рис", "лук", "чеснок", "томатная паста", "хмели-сунели", "кинза", "соль"],
        "instructions": "1. Мясо отварить до готовности\n2. Лук обжарить, добавить томатную пасту\n3. Добавить рис в бульон\n4. Через 15 минут добавить зажарку\n5. Добавить специи, чеснок\n6. Варить еще 10 минут",
        "cooking_time": 90,
        "difficulty": "medium"
    },
    {
        "title": "Суп с фрикадельками",
        "ingredients": ["фарш мясной", "картофель", "морковь", "лук", "рис", "соль", "перец", "укроп"],
        "instructions": "1. Из фарша слепить фрикадельки\n2. В кипящую воду бросить фрикадельки\n3. Добавить нарезанный картофель\n4. Лук и морковь обжарить, добавить в суп\n5. Добавить рис, варить 15 минут\n6. Посыпать укропом",
        "cooking_time": 40,
        "difficulty": "easy"
    },
    {
        "title": "Сырный суп",
        "ingredients": ["сыр плавленый", "картофель", "морковь", "лук", "сливки", "сухарики", "соль", "укроп"],
        "instructions": "1. Картофель нарезать кубиками, отварить\n2. Лук и морковь обжарить\n3. Сыр натереть на терке\n4. Добавить сыр в суп, помешивать до растворения\n5. Добавить сливки, прогреть\n6. Подавать с сухариками",
        "cooking_time": 35,
        "difficulty": "easy"
    },
    {
        "title": "Окрошка",
        "ingredients": ["картофель", "огурцы", "редис", "яйца", "колбаса", "лук зеленый", "кефир", "соль"],
        "instructions": "1. Картофель и яйца отварить, нарезать\n2. Огурцы и редис нарезать\n3. Колбасу нарезать кубиками\n4. Все смешать в кастрюле\n5. Залить кефиром, разбавленным водой\n6. Посолить, добавить зелень",
        "cooking_time": 25,
        "difficulty": "easy"
    },

    # 31-40: Салаты
    {
        "title": "Салат Цезарь",
        "ingredients": ["куриное филе", "салат айсберг", "помидоры черри", "сухарики", "сыр пармезан", "соус цезарь"],
        "instructions": "1. Курицу обжарить, нарезать полосками\n2. Салат порвать руками\n3. Помидоры разрезать пополам\n4. Все смешать в большой миске\n5. Заправить соусом\n6. Посыпать пармезаном и сухариками",
        "cooking_time": 25,
        "difficulty": "medium"
    },
    {
        "title": "Салат из свежих овощей",
        "ingredients": ["помидоры", "огурцы", "лук", "перец болгарский", "соль", "масло оливковое", "укроп"],
        "instructions": "1. Все овощи помыть\n2. Помидоры и огурцы нарезать кружочками\n3. Лук и перец нарезать полукольцами\n4. Смешать в салатнице\n5. Посолить, заправить маслом\n6. Украсить укропом",
        "cooking_time": 15,
        "difficulty": "easy"
    },
    {
        "title": "Винегрет",
        "ingredients": ["свекла", "картофель", "морковь", "огурцы соленые", "лук", "горошек консервированный",
                        "масло подсолнечное", "соль"],
        "instructions": "1. Свеклу, картофель и морковь отварить, нарезать кубиками\n2. Огурцы и лук нарезать\n3. Все смешать в миске\n4. Добавить горошек\n5. Посолить, заправить маслом\n6. Хорошо перемешать",
        "cooking_time": 60,
        "difficulty": "easy"
    },
    {
        "title": "Салат с тунцом",
        "ingredients": ["тунец консервированный", "яйца", "рис", "кукуруза консервированная", "лук", "майонез", "соль"],
        "instructions": "1. Рис отварить, остудить\n2. Яйца отварить, нарезать кубиками\n3. Тунец размять вилкой\n4. Лук мелко нарезать\n5. Все смешать, добавить кукурузу\n6. Заправить майонезом, посолить",
        "cooking_time": 30,
        "difficulty": "easy"
    },
    {
        "title": "Греческий салат",
        "ingredients": ["помидоры", "огурцы", "перец болгарский", "лук красный", "маслины", "сыр фета",
                        "масло оливковое", "орегано"],
        "instructions": "1. Овощи нарезать крупно\n2. Сыр нарезать кубиками\n3. Маслины разрезать пополам\n4. Все смешать в миске\n5. Заправить маслом, посыпать орегано\n6. Аккуратно перемешать",
        "cooking_time": 20,
        "difficulty": "easy"
    },
    {
        "title": "Салат Оливье",
        "ingredients": ["картофель", "морковь", "яйца", "огурцы соленые", "горошек консервированный", "колбаса",
                        "майонез", "соль"],
        "instructions": "1. Картофель, морковь и яйца отварить\n2. Все ингредиенты нарезать мелкими кубиками\n3. Добавить горошек\n4. Посолить, заправить майонезом\n5. Тщательно перемешать\n6. Дать настояться 1 час",
        "cooking_time": 45,
        "difficulty": "easy"
    },
    {
        "title": "Салат с авокадо и креветками",
        "ingredients": ["авокадо", "креветки", "руккола", "помидоры черри", "лимон", "масло оливковое", "соль",
                        "перец"],
        "instructions": "1. Креветки отварить, очистить\n2. Авокадо нарезать ломтиками\n3. Рукколу промыть, обсушить\n4. Помидоры разрезать пополам\n5. Все смешать\n6. Заправить лимонным соком и маслом",
        "cooking_time": 20,
        "difficulty": "medium"
    },
    {
        "title": "Морковный салат",
        "ingredients": ["морковь", "яблоко", "изюм", "грецкие орехи", "мед", "лимонный сок"],
        "instructions": "1. Морковь натереть на терке\n2. Яблоко натереть на терке\n3. Орехи измельчить\n4. Изюм промыть\n5. Все смешать\n6. Заправить медом и лимонным соком",
        "cooking_time": 15,
        "difficulty": "easy"
    },
    {
        "title": "Салат с пекинской капустой",
        "ingredients": ["капуста пекинская", "кукуруза консервированная", "сухарики", "майонез", "соль", "укроп"],
        "instructions": "1. Капусту нашинковать\n2. Добавить кукурузу\n3. Посолить, заправить майонезом\n4. Хорошо перемешать\n5. Перед подачей добавить сухарики\n6. Посыпать укропом",
        "cooking_time": 10,
        "difficulty": "easy"
    },
    {
        "title": "Теплый салат с баклажанами",
        "ingredients": ["баклажаны", "помидоры", "лук", "чеснок", "масло оливковое", "соль", "базилик"],
        "instructions": "1. Баклажаны нарезать кубиками, обжарить\n2. Лук нарезать полукольцами, обжарить\n3. Помидоры нарезать кубиками\n4. Все смешать в миске\n5. Добавить измельченный чеснок\n6. Посыпать базиликом",
        "cooking_time": 30,
        "difficulty": "medium"
    },

    # 41-50: Вегетарианские блюда
    {
        "title": "Овощное рагу",
        "ingredients": ["картофель", "кабачок", "помидоры", "перец болгарский", "лук", "морковь", "соль", "перец",
                        "масло оливковое"],
        "instructions": "1. Все овощи нарезать кубиками\n2. Обжарить лук и морковь\n3. Добавить остальные овощи\n4. Посолить, поперчить\n5. Тушить под крышкой 25-30 минут\n6. Подавать горячим",
        "cooking_time": 45,
        "difficulty": "easy"
    },
    {
        "title": "Картофельное пюре",
        "ingredients": ["картофель", "молоко", "масло сливочное", "соль"],
        "instructions": "1. Картофель отварить до готовности\n2. Слить воду\n3. Размять картофель толкушкой\n4. Добавить теплое молоко и масло\n5. Посолить по вкусу\n6. Взбить до пышности",
        "cooking_time": 25,
        "difficulty": "easy"
    },
    {
        "title": "Жареная картошка",
        "ingredients": ["картофель", "лук", "соль", "перец", "масло растительное", "укроп"],
        "instructions": "1. Картофель почистить, нарезать соломкой\n2. Лук нарезать полукольцами\n3. Разогреть масло на сковороде\n4. Обжарить картофель до золотистой корочки\n5. Добавить лук, посолить, поперчить\n6. Готовить еще 10 минут",
        "cooking_time": 30,
        "difficulty": "easy"
    },
    {
        "title": "Гречневая каша с грибами",
        "ingredients": ["гречка", "грибы", "лук", "морковь", "соль", "перец", "масло растительное"],
        "instructions": "1. Гречку промыть\n2. Грибы нарезать пластинками\n3. Лук и морковь мелко нарезать\n4. Обжарить грибы с овощами\n5. Добавить гречку, залить водой\n6. Тушить 20-25 минут до готовности",
        "cooking_time": 40,
        "difficulty": "easy"
    },
    {
        "title": "Рисовая каша на молоке",
        "ingredients": ["рис", "молоко", "сахар", "соль", "масло сливочное"],
        "instructions": "1. Рис промыть несколько раз\n2. Залить молоком\n3. Добавить сахар и щепотку соли\n4. Варить на медленном огне 20 минут, помешивая\n5. Добавить масло\n6. Накрыть крышкой, дать настояться 10 минут",
        "cooking_time": 30,
        "difficulty": "easy"
    },
    {
        "title": "Творожная запеканка",
        "ingredients": ["творог", "яйца", "манка", "сахар", "сметана", "изюм", "ванилин"],
        "instructions": "1. Творог протереть через сито\n2. Добавить яйца, сахар, ванилин\n3. Добавить манку, изюм\n4. Выложить в смазанную форму\n5. Смазать сверху сметаной\n6. Запекать 40 минут при 180°C",
        "cooking_time": 50,
        "difficulty": "medium"
    },
    {
        "title": "Сырники",
        "ingredients": ["творог", "яйца", "мука", "сахар", "соль", "ванилин", "масло растительное", "сметана"],
        "instructions": "1. Творог протереть через сито\n2. Добавить яйца, сахар, соль, ванилин\n3. Постепенно ввести муку\n4. Сформировать сырники\n5. Обжарить на среднем огне до золотистой корочки\n6. Подавать со сметаной",
        "cooking_time": 30,
        "difficulty": "medium"
    },
    {
        "title": "Макароны с сыром",
        "ingredients": ["макароны", "сыр", "сливки", "соль", "перец", "чеснок"],
        "instructions": "1. Макароны отварить согласно инструкции\n2. Сыр натереть на терке\n3. Чеснок измельчить\n4. Смешать макароны со сливками и сыром\n5. Добавить чеснок, посолить, поперчить\n6. Запекать 10 минут при 180°C",
        "cooking_time": 25,
        "difficulty": "easy"
    },
    {
        "title": "Плов вегетарианский",
        "ingredients": ["рис", "морковь", "лук", "изюм", "курага", "специи для плова", "соль", "масло растительное"],
        "instructions": "1. Рис промыть, замочить на 30 минут\n2. Лук и морковь нарезать соломкой\n3. Обжарить овощи\n4. Добавить рис, воду, специи\n5. Добавить сухофрукты\n6. Тушить 40 минут на медленном огне",
        "cooking_time": 90,
        "difficulty": "medium"
    },
    {
        "title": "Картофельные зразы",
        "ingredients": ["картофель", "яйца", "мука", "грибы", "лук", "соль", "перец", "масло для жарки"],
        "instructions": "1. Картофель отварить, сделать пюре\n2. Добавить яйцо и муку, замесить тесто\n3. Грибы и лук обжарить\n4. Из теста сформировать лепешки\n5. Положить начинку, защипать\n6. Обжарить до золотистой корочки",
        "cooking_time": 60,
        "difficulty": "medium"
    }
]
def seed_database():
    db = SessionLocal()

    existing = db.query(models.RecipeDB).count()
    if existing > 0:
        print(f"В базе уже есть {existing} рецептов. Пропускаем заполнение.")
        db.close()
        return

    for recipe_data in RECIPES_DATA:
        recipe = models.RecipeDB(**recipe_data)
        db.add(recipe)

    db.commit()
    print(f"Добавлено {len(RECIPES_DATA)} тестовых рецептов.")
    db.close()


if __name__ == "__main__":
    seed_database()
